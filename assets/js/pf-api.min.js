wp.api.loadPromise.done(function(){wp.api.init({versionString:"pf/v1",apiRoot:wp.api.utils.getRootUrl()+"wp-json/"}),jQuery(document.body).ready(function(){window.leaderboardInits={authors:!1,validPosts:!1},("authors"===window.pf.location||jQuery("body").hasClass("pressforward_page_pf-tools"))&&(window.pf.stats.authors={endpoint:function(){return wp.api.utils.getRootUrl()+"wp-json/pf/v1/stats/authors"},arguments:function(t){return this.endpoint()+"?page="+t},pages:1,pagesFull:!1,leaderboard:{},pageFillerFunction:function(t){return jQuery.getJSON(window.pf.stats.authors.arguments(t),function(s){return console.log("PF Author Leaderboard Fill",s),console.log("PF Check: ",void 0!==s.length&&0===s.length),void 0!==s.length&&0===s.length?(window.pf.stats.authors.pagesFull=!0,console.log("PF Author Leaderboard Complete"),!0):(console.log("PF Author Leaderboard Fills in",s),jQuery.each(s,function(s,o){console.log("PF Author Leaderboard advancing to page ",t),window.pf.stats.authors.leaderboard.hasOwnProperty(s)?window.pf.stats.authors.leaderboard[s].count+=o.count:window.pf.stats.authors.leaderboard[s]=o}),!1)})},getLeaderboard:function(t){if(t){if(window.leaderboardInits.authors)return"";window.leaderboardInits.authors=!0}return console.log("PF Author Page set",window.pf.stats.authors.pages),this.pageFillerFunction(window.pf.stats.authors.pages).done(function(t){if(!1!==window.pf.stats.authors.pagesFull){var s=Object.keys(window.pf.stats.authors.leaderboard).sort(function(t,s){return window.pf.stats.authors.leaderboard[s].count-window.pf.stats.authors.leaderboard[t].count});console.log(s);var o=0;for(var a in s)if(s.hasOwnProperty(a)){var e=window.pf.stats.authors.leaderboard[s[a]],n='<br/><li id="author-'+o+'"><strong>Name:</strong> '+e.name+"<li><strong>Count:</strong> "+e.count+"</li></li>";jQuery("#author-leaderboard ul").append(n),o++}return""}window.pf.stats.authors.pages=window.pf.stats.authors.pages+1,window.pf.stats.authors.getLeaderboard(!1)}),""}}),("stats"===window.pf.location||jQuery("body").hasClass("pressforward_page_pf-tools"))&&(window.pf.stats.valid_posts={endpoint:function(){return wp.api.utils.getRootUrl()+"wp-json/pf/v1/stats/pf_posted"},arguments:function(t){return this.endpoint()+"?page="+t},pages:1,pagesFull:!1,postCount:0,leaderboard:{},flesch_kincaid_score_total:0,pageFillerFunction:function(t){return jQuery.getJSON(window.pf.stats.valid_posts.arguments(t),function(s){return console.log("PF Valid Posts Leaderboard Fill",s),console.log("PF Check: ",void 0!==s.length&&0===s.length),void 0!==s.length&&0===s.length?(window.pf.stats.valid_posts.pagesFull=!0,console.log("PF Valid Posts Leaderboard Complete"),!0):(console.log("PF Valid Posts Leaderboard Fills in",s),jQuery.each(s,function(s,o){console.log("PF Valid Posts Leaderboard advancing to page ",t),window.pf.stats.valid_posts.leaderboard[o.ID]=o,window.pf.stats.valid_posts.flesch_kincaid_score_total+=o.flesch_kincaid_score,window.pf.stats.valid_posts.postCount+=1}),!1)})},getLeaderboard:function(t){if(t){if(window.leaderboardInits.validPosts)return"";window.leaderboardInits.validPosts=!0}return console.log("PF Valid Posts Page set",window.pf.stats.valid_posts.pages),this.pageFillerFunction(window.pf.stats.valid_posts.pages).done(function(t){if(console.log("Checking for next step of pages ",window.pf.stats.valid_posts.pages),!1===window.pf.stats.valid_posts.pagesFull)return window.pf.stats.valid_posts.pages=window.pf.stats.valid_posts.pages+1,window.pf.stats.valid_posts.getLeaderboard(!1);var s="<strong>Total PressForward Items Published:</strong> "+window.pf.stats.valid_posts.postCount+". ";jQuery("#top-level").append(s);var o="<strong>Total WordCount:</strong> "+window.pf.stats.wordcount.total()+". ";window.pf.stats.valid_posts.flesch_kincaid_score_avg=window.pf.stats.valid_posts.flesch_kincaid_score_total/window.pf.stats.valid_posts.postCount,jQuery("#top-level").append(o);var a=window.pf.stats.sources.total(),e=Object.keys(a).sort(function(t,s){return a[s]-a[t]});console.log(e);var n=0;for(var r in e)if(e.hasOwnProperty(r)){var i=a[e[r]],d='<br/><li id="source-'+n+'"><strong>Items from</strong> <a href="'+e[r]+'" target="_blank">'+e[r]+"</a>: "+i+"</li>";jQuery("#sources-leaderboard ul").append(d),n++}return""})}},window.pf.stats.wordcount={limits:[],count:0,results:{},setLimit:function(t,s){this.limits.push({key:t,value:s})},pullPostsTogether:function(t){window.pf.stats.valid_posts.pagesFull||window.pf.stats.valid_posts.getLeaderboard(!1),window.pf.stats.wordcount.count=0,jQuery.each(window.pf.stats.valid_posts.leaderboard,function(t){window.pf.stats.wordcount.count+=window.pf.stats.valid_posts.leaderboard[t].wordcount}),void 0===t&&(t=(new Date).getTime()),this.results[t]=JSON.parse(window.pf.stats.wordcount.count)},total:function(){return this.pullPostsTogether("total"),this.results.total}},window.pf.stats.sources={limits:[],count:0,results:{},resultObj:{},setLimit:function(t,s){this.limits.push({key:t,value:s})},assemble:function(t){window.pf.stats.sources.count=0,window.pf.stats.sources.resultObj={},jQuery.each(window.pf.stats.valid_posts.leaderboard,function(t){var s=this.source_link;void 0===window.pf.stats.sources.resultObj[s]?window.pf.stats.sources.resultObj[s]=1:window.pf.stats.sources.resultObj[s]+=1}),void 0===t&&(t=(new Date).getTime()),this.results[t]=JSON.parse(JSON.stringify(window.pf.stats.sources.resultObj))},pullPostsTogether:function(t){window.pf.stats.valid_posts.pagesFull?window.pf.stats.sources.assemble(t):(window.pf.stats.valid_posts.getLeaderboard(!1),window.pf.stats.sources.assemble(t))},total:function(){return this.pullPostsTogether("total"),this.results.total}})})});